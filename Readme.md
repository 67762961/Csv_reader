# 使用说明 v2.0.0
## 参数表说明
&emsp; &emsp; 文件 **Csv_reader_ParaTemplate.m** 为基础示例输入参数表，**禁止修改**，运行该文件将读取 TestLib 中数据，以验证程序是否能良好运转。在实验数据读取时，应当另创一个新的m文件，将参数表内容复制过去，再修改参数使用。
&emsp; &emsp; 具体参数说明如下：
- #### 文件参数
    - ##### Para_file.location
        &emsp; &emsp;数据读取以及读取结果输出路径，字符串类型。实验时应当在U盘根目录建立八位日期名文件夹存放数据，运行程序读取数据时，可直接复制路径到此参数。
            &emsp; &emsp;示例: 'E:\20250723'
    - ##### Para_file.tablename
        &emsp; &emsp;数据文件名，对应示波器在保存CSV文件时填入的文件名称，字符串类型。实验时应当以测试器件的器件类型或器件类型+器件位置命名。
            &emsp; &emsp;示例: 'INVA'、'INVB'、'BOOST'
    - ##### Para_file.dataname
        &emsp; &emsp;输出数据表名，同样为输出图像文件夹名，字符串类型。长度不应超过28个字符，否则会报错。实验时应当以“(机型)-(器件)-(温度)-(电压)-(备注)”命名，备注部分主要体现于其他组的差异，如在配置驱动参数时，可将驱动参数作为备注。
            &emsp; &emsp;示例: '320英飞凌-BT1-常温-600-内管加电容'、'320全斯达-AT4-常温-600-2.0-9.4'   
    - ##### Para_file.datstart
        &emsp; &emsp;该组数据的起始编号，程序将从后缀为该数字的数据文件开始读取，正整数类型，填写001与1效果相同。
        &emsp; &emsp;示例: 1、02、003
    - ##### Para_file.datnum
        &emsp; &emsp;该组数据的数量，程序将从起始编号开始读取该数量个数据为一组，正整数类型。若仅看单个CSV文件，此项填1；多个SCV文件，按照文件数量填写即可
- #### 模式配置参数
    - ##### Para_mode.nspd
        &emsp; &emsp;示波器采样率，两个采样点之间的时间间隔，ns为单位，正小数类型。该数据与di/dt、dv/dt等时间关联数据有强相关，建议仔细核对文件的采样率，可打开CSV文件查看，一般取 1.6 或 3.2 。
    - ##### Para_mode.Chmode
        &emsp; &emsp;通道分配模式，字符串型，仅 'setch' 和 'findch' 有效。'setch'为手动设置通道分配，'findch'为自动设置通道。目前自动设置模式并不稳定，建议手动设置。
    - ##### Para_mode.Ch_labels
        &emsp; &emsp;通道分配，仅在手动设置有效，正整数数组类型。其中五个元素分别代表 Vge、Vce、Ic、Vd、Id 的对应通道，若保存文件时示波器的ch1~ch5分别是以上数据，则此项填入 [1, 2, 3, 4, 5] ；若Id、Ic交换则填入 [1, 2, 5, 4, 3] ；若有其中某一项为示波器计算结果，则应当进入CSV文件仔细查看对应数据在第几列再减1填入此项。
        &emsp; &emsp;同时此项包括了Id反相功能，在Id需要反相时，可在数组第五个数前加入负号，仅Id可用。
    - ##### Para_mode.Smooth_Win
        &emsp; &emsp;各通道滤波窗口长度，非负整数数组类型。其中五个元素分别为 Vge、Vce、Ic、Vd、Id 的对应数据滤波窗口长度。一般情况下，Vce和Vd不需要滤波；Vge可以有3 ~ 5格长度的滤波；Ic和Id也同样可以有3 ~ 5格长度的滤波，若电流数据稳定，尽量不滤波。所有通道滤波都建议不要超过10。
    - ##### Para_mode.dvdtmode
        &emsp; &emsp;关断电压dvdt计算区间，正整数数组形。一般的标准dvdt计算应当为10%到90%Vcetop，但实际操作中，由于某些器件特性导致的前期极缓抬升，因此允许采用其他起始结束点，如果手动设置了计算区间则，输出绘图以红色显示10%到90%区间的基础上，额外以绿色部分显示手动设置的区间。
            &emsp; &emsp;示例: [30, 90]、[15, 85]  
    - ##### Para_mode.didtmode
        &emsp; &emsp;开通电流didt计算区间，正整数数组形。与dvdt计算区间设置原理相同，但不同的是，理论上didt的计算应当就是10%到90%Ictop，原则上不应当设置别的数值。但未防止状态机识别起始算法失效以及其他原因产生的报错影响读取，所以保留此接口。同时，与dvdt计算区间参数不同的是，手动设置计算区间后，输出将会变为只有手动设置段。PS：极端条件下，结束位置可以取到高于100%，但极度不推荐此参数。
            &emsp; &emsp;示例: [30, 90]、[15, 85]
    - ##### Para_mode.Dflag
        &emsp; &emsp;二极管反向恢复计算使能开关，布尔类型。置1时将计算二极管反向恢复Prr和Erec，置0时将跳过该部分。若数据文件中未包括Id情况，则强烈建议关闭改选项。
    - ##### Para_mode.Drawflag
        &emsp; &emsp;组间数据分析绘图使能开关，布尔类型。置1时将开启组间数据分析绘图，包括尖峰损耗等数据在组间变化的趋势等，置0时将跳过该过程。
- #### 数据配置参数
    - ##### Para_data.gate_didt
        &emsp; &emsp;开通电流didt上升容错，非负整数类型，可填0。didt上升沿检测算法的检测窗口长度，若在i到i+gate_didt的区间内呈上升趋势则判断为上升；反之则判断为下降重置初始点。填0时即为设置成要求必须严格上升，即i+1的数值必须比i高。实际使用时，若Ic数据线非常光滑，则可以填0关闭容错；若略有毛刺则可以填值3~5；不建议填10以上的值。
    - ##### Para_data.gate_Erec
        &emsp; &emsp;Erec计算反向恢复功率下降沿容错，非负整数类型，可填0。原理与didt上升容错大致相同，但由于Prr为Id和Vd的乘积，因此一般干扰都较大，所以填制都可以放大一些。常见填值10~50都有，需要视情况而定。
- #### 数据配置参数
    - ##### Prra_draw.Vgeth
        &emsp; &emsp;门极开通电压，整数类型。用于判断开关时间以及绘图，原则上应填写器件手册中开通所需的Vge电压，但通常填0也能运行。
    - ##### Prra_draw.Vmax
        &emsp; &emsp;器件最大耐压值，正整数类型。器件最大耐压，Vcemax绘图时将添加一条耐压值线，以供评估电压尖峰风险。